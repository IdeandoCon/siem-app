{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { UserService } from 'src/app/api/user.service';\nimport { URL_TOKEN } from 'src/app/config/config';\nimport { URL_SERVIDOR } from 'src/app/config/config';\nimport { OtrasJurisdicciones } from 'src/app/interfaces/resultados';\nimport { Chart } from 'chart.js';\nimport { HttpClient } from '@angular/common/http';\nimport { AlertController } from '@ionic/angular';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"src/app/api/user.service\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"../components/header/header.component\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = [\"BarsChartOtrasJurisdicciones\"];\n\nfunction Tab1Page_ion_card_header_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card-header\");\n    i0.ɵɵelement(1, \"img\", 7);\n    i0.ɵɵelementStart(2, \"ion-card-title\", 8);\n    i0.ɵɵtext(3, \"COPARTICIPACI\\u00D3N PROVINCIAL Y OTROS INGRESOS\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const logo_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", logo_r2.img, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport let Tab1Page = /*#__PURE__*/(() => {\n  class Tab1Page {\n    constructor(alertController, userService, http) {\n      this.alertController = alertController;\n      this.userService = userService;\n      this.http = http;\n      this.customYearValues = [2020, 2016, 2008, 2004, 2000, 1996];\n      this.customDayShortNames = ['Domingo', 'lunes', 'martes', 'miercoles', 'jueves', 'viernes', 'sabado'];\n      this.customPickerOptions = {\n        buttons: [{\n          text: 'Save',\n          handler: () => console.log('Clicked Save!')\n        }, {\n          text: 'Log',\n          handler: () => {\n            console.log('Clicked Log. Do not Dismiss.');\n            return false;\n          }\n        }]\n      };\n    }\n\n    ngOnDestroy() {\n      this.getLogo();\n      this.createOtrasJurisdicciones();\n      this.var_ingreso_otrasJurisdicciones(event);\n    }\n\n    doRefresh(event) {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.getLogo();\n        this.getLogo();\n        this.createOtrasJurisdicciones();\n        this.var_ingreso_otrasJurisdicciones(event);\n        const alert = yield this.alertController.create({\n          cssClass: 'my-custom-class',\n          header: 'Éxitos',\n          subHeader: '',\n          message: 'Los datos se recargaron con éxito.',\n          buttons: ['OK']\n        });\n        yield alert.present();\n      });\n    }\n\n    ionViewWillEnter() {\n      this.getLogo();\n      this.createOtrasJurisdicciones();\n      this.var_ingreso_otrasJurisdicciones(event);\n    }\n\n    var_ingreso_otrasJurisdicciones(event) {\n      const my_url = URL_SERVIDOR + '/otras-jur/2020/20200101/20200131';\n      var token = URL_TOKEN;\n      const headers = {\n        'content-type': 'application/json',\n        'x-token': token\n      };\n      this.http.get(my_url, {\n        headers: headers\n      }).subscribe(data => {\n        let ingresoMunicipal = data['resultado'].map(data => data.importe);\n        let leyendaMunicipal = data['resultado'].map(data => data.leyenda);\n        this.apiIngresoMunicipalOtras = ingresoMunicipal;\n        this.apiLeyendaMunicipalOtras = leyendaMunicipal;\n        this.createOtrasJurisdicciones();\n        event.target.complete();\n      });\n    }\n\n    createOtrasJurisdicciones() {\n      const ctx = this.BarsChartOtrasJurisdicciones.nativeElement;\n      ctx.height = 400;\n      this.BarsOtrasJurisdicciones = new Chart(ctx, {\n        type: 'doughnut',\n        data: {\n          labels: this.apiLeyendaMunicipalOtras,\n          datasets: [{\n            label: '# Miles de pesos',\n            data: this.apiIngresoMunicipalOtras,\n            backgroundColor: ['rgba(255, 99, 133, 0.3)', 'rgba(54, 161, 235, 0.3)', 'rgba(252, 79, 48, 0.3)', 'rgba(5, 140, 107, 0.3)', 'rgba(74, 3, 82, 0.3)'],\n            hoverBackgroundColor: ['#FF6384', '#36A2EB', '#fd4f30', '#115912', '#62056e']\n          }]\n        },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false\n        }\n      });\n    }\n\n    getLogo() {\n      // Get saved list of students\n      this.userService.getLogos().subscribe(response => {\n        this.logos = response;\n        console.log(response);\n      });\n    }\n\n  }\n\n  Tab1Page.ɵfac = function Tab1Page_Factory(t) {\n    return new (t || Tab1Page)(i0.ɵɵdirectiveInject(i1.AlertController), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.HttpClient));\n  };\n\n  Tab1Page.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: Tab1Page,\n    selectors: [[\"app-tab1\"]],\n    viewQuery: function Tab1Page_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.BarsChartOtrasJurisdicciones = _t.first);\n      }\n    },\n    decls: 14,\n    vars: 1,\n    consts: [[\"slot\", \"fixed\", 3, \"ionRefresh\"], [\"pullingIcon\", \"chevron-down-circle-outline\", \"pullingText\", \"Haz pull para recargar\", \"refreshingSpinner\", \"lines\", \"refreshingText\", \"Refrescando resultados...\"], [\"mode\", \"ios\", \"color\", \"secondary\"], [4, \"ngFor\", \"ngForOf\"], [\"mode\", \"ios\", 1, \"tarjetadeotras\"], [1, \"titulo-cards\"], [\"BarsChartOtrasJurisdicciones\", \"\"], [3, \"src\"], [1, \"titulo\"]],\n    template: function Tab1Page_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-header\");\n        i0.ɵɵelementStart(1, \"ion-content\");\n        i0.ɵɵelementStart(2, \"ion-content\");\n        i0.ɵɵelementStart(3, \"ion-refresher\", 0);\n        i0.ɵɵlistener(\"ionRefresh\", function Tab1Page_Template_ion_refresher_ionRefresh_3_listener($event) {\n          return ctx.doRefresh($event);\n        });\n        i0.ɵɵelement(4, \"ion-refresher-content\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"ion-card\", 2);\n        i0.ɵɵtemplate(6, Tab1Page_ion_card_header_6_Template, 4, 1, \"ion-card-header\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"ion-card\", 4);\n        i0.ɵɵelementStart(8, \"ion-card-header\");\n        i0.ɵɵelementStart(9, \"h5\", 5);\n        i0.ɵɵtext(10, \"Ingreso de Otras Jurisdiciones\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"ion-card-content\");\n        i0.ɵɵelement(12, \"canvas\", null, 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.logos);\n      }\n    },\n    directives: [i4.HeaderComponent, i1.IonContent, i1.IonRefresher, i1.IonRefresherContent, i1.IonCard, i5.NgForOf, i1.IonCardHeader, i1.IonCardTitle, i1.IonCardContent],\n    styles: [\".welcome-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}.titulo[_ngcontent-%COMP%]{text-align:center;font-size:20PX}.titulo-cards[_ngcontent-%COMP%]{text-align:center!important}.tarjetadeotras[_ngcontent-%COMP%]{height:auto;width:auto}\"]\n  });\n  return Tab1Page;\n})();","map":null,"metadata":{},"sourceType":"module"}